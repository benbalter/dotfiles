#!/bin/bash
# Disable Comic Sans font globally on macOS
# This script attempts to disable Comic Sans MS using Font Book

set -e

echo "Attempting to disable Comic Sans MS..."

# Try to disable Comic Sans MS using Font Book's command-line interface
# This will work for user-installed fonts, but system fonts may be protected

# Font paths to check
FONT_NAME="Comic Sans MS"
USER_FONTS="$HOME/Library/Fonts"
SYSTEM_FONTS="/Library/Fonts"

# Function to check if font exists and try to disable it
disable_font() {
  local font_path="$1"
  
  if [ -d "$font_path" ]; then
    # Look for Comic Sans files
    if find "$font_path" -iname "*comic*sans*.ttf" -o -iname "*comic*sans*.otf" 2>/dev/null | grep -q .; then
      echo "Found Comic Sans in $font_path"
      
      # Try to disable using Font Book
      # Note: This only works for user fonts, not system fonts
      osascript -e "tell application \"Font Book\" to disable font \"$FONT_NAME\"" 2>/dev/null || true
      
      echo "Attempted to disable Comic Sans MS"
    fi
  fi
}

# Check and disable from user fonts
disable_font "$USER_FONTS"

# Check system fonts (likely protected, but try anyway)
disable_font "$SYSTEM_FONTS"

echo ""
echo "Comic Sans disable script completed."
echo "Note: macOS System Integrity Protection may prevent disabling system fonts."
echo "The font has been disabled where possible, but may still appear in some applications."
echo "VS Code is configured to never use Comic Sans via explicit font settings."

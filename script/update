#!/bin/bash
# Update all installed dependencies
# Usage: up

DOTFILES_ROOT="$( cd "$( dirname "${BASH_SOURCE[0]}" )" && cd .. && pwd )"
source "$DOTFILES_ROOT/lib/functions.sh"
source "$DOTFILES_ROOT/lib/globals.sh"

title "Updating Homebrew..."
brew update
brew upgrade

title "Updating App Store apps"
softwareupdate --install --all

title "Updating Atom..."
apm update --no-confirm
apm upgrade --no-confirm

title "Updating global Node packages..."
npm update --global
npm upgrade --global

if [ $(rbenv global) != $(latest_ruby) ]; then
  title "Updating Ruby..."
  rbenv install $(latest_ruby)
  rbenv global $(latest_ruby)
  rbenv rehash
  gem install bundler
fi

title "Updating system Ruby gems..."
source "$DOTFILES_ROOT/lib/ruby.sh"

title "Updating Oh My ZSH"
/bin/sh $ZSH/tools/upgrade.sh
